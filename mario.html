<!DOCTYPE html>
<html>
    <head>
        <title>MARIO CONTADORES</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&display=swap');
            @import url('https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Oxanium:wght@200..800&display=swap');

            :root {
            --font-custom-size: 0.3vw;
            }

            html {
                font-size: calc(1rem + var(--font-custom-size)); /* Adjusts size based on viewport width */
            }

            body{
                font-family: "Josefin Sans", sans-serif;
                font-size: 1.25rem;
                background-color: white;
            }
            .d-flex{display: flex;}
            .m-auto{margin: auto;}
            .contenedor{
                width: 100vw;
                height: 100vh;
            }
            td{
                text-align: center;
                vertical-align: middle;
            }
            table{
                margin: 0.05rem;
            }

            span{
                font-size: 2rem;
            }

            table button{
                width: 3rem;
                height: 3rem;
            }
            .displayNumber{
                font-family: "Oxanium", sans-serif;
                font-size: 2.5rem;
                letter-spacing: 5px;
                background-color: rgb(27, 29, 29);
                color: white;
                display: flex;
                align-items: center;
                justify-content: center;
                width: 8rem;
                height: 6rem;
            }
            .plus-button{
                background-color: rgb(23, 182, 23);
                color: white;
            }
            .minus-button{
                background-color: rgb(255, 86, 8);
                color:white;
            }
            .plus-button:hover{
                background-color: rgb(14, 112, 14);
                color: white;
            }
            .minus-button:hover{
                background-color: rgb(180, 65, 11);
                color: white;
            }
            .centercenter{
                display: flex;
                align-items: center;
                justify-content: center;
            }

            h2{
                font-size: 2.5rem;
            }
        </style>
    </head>
    <body>
        <div class="contenedor d-flex">
            <div class="m-auto">
                <div class="mx-auto">
                    <h2 class="text-top text-center">MARIO CONTADORES</h2>
                </div>
                <p class="text-center">"UY, ESA CHAVA ESTA GUAPA"</p>
                <div div class="m-auto text-center">
                    <table class="centercenter">
                        <tr>
                            <td rowspan="2"><div id="display1" class="displayNumber">0</div></td>
                            <td><button class="btn plus-button centercenter" onclick="modifyDisplay(1,'display1')"><span>+</span></button></td>
                        </tr>
                        <tr>
                            <td><button class="btn minus-button centercenter" onclick="modifyDisplay(-1,'display1')"><span>-</span></button></td>
                        </tr>
                    </table>
                </div>
                <br><br> 
                <p class="text-center">*NO LE REGRESAN LA SOLI*</p>
                <div class="m-auto text-center">
                    <table class="centercenter">
                        <tr>
                            <td rowspan="2"><div id="display2" class="displayNumber">0</div></td>
                            <td><button class="btn btn-danger centercenter" onclick="modifyDisplay(1,'display2')"><span>+</span></button></td>
                        </tr>
                        <tr>
                            <td><button class="btn btn-warning centercenter" onclick="modifyDisplay(-1,'display2')"><span>-</span></button></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    </body>
</html>
<script>
    // Modify display and send updates to Flask API
    function modifyDisplay(i, displayID) {
            updateDisplayAPI(displayID, i > 0 ? 'increase' : 'decrease');
    }

    // Send update to Flask API (GET request)
    function updateDisplayAPI(displayID, action) {
    const url = `https://b178-40-233-3-143.ngrok-free.app/requests/post?${displayID}=${action}`;

    fetch(url, {
        method: 'GET',
        headers: {
            'ngrok-skip-browser-warning': 'anyvalue' // Add the custom header
        }
    })
    .then(response => response.json())
    .then(data => {
        // Update display with the value from API
        document.getElementById(displayID).innerHTML = data[displayID];
        console.log(`API response: ${displayID} updated to`, data[displayID]);
    })
    .catch(error => {
        console.error('Error updating via API:', error);
    });

    }

function isMobile() {
    const regex = /Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;
    return regex.test(navigator.userAgent);
    }
    
    var r = document.querySelector(':root');
    if (isMobile()) {
        r.style.setProperty('--font-custom-size', '1vw');
        console.log("Mobile device detected");
    } else {
        console.log("Desktop device detected");
    }

modifyDisplay(1, 'display1');
modifyDisplay(-1, 'display1');
modifyDisplay(1, 'display2');
modifyDisplay(-1, 'display2');
</script>

